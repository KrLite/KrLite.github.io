// Fix scroll and overscroll issues on Safari
// This also breaks current back to top button functionality
html {
  overscroll-behavior: none;
}

/*
html {
  overflow: hidden;
}

body {
  overflow: auto;
  height: 100vh;
  overscroll-behavior: contain;
}
  */

// Improve headings
h1,
h2,
h3,
h4,
h5,
h6,
.header-anchor {
  font-weight: 750 !important;
}

// Fix footer issues
.plume-footer {
  margin: 0 !important;
}

// Fix details summary margin
.plume-content {
  .hint-container.details {
    &[open],
    & {
      > summary {
        margin-bottom: -1.1rem;
      }
    }
  }
}

// Fix last paragraph margin in <!-- more --> contents
.plume-content.excerpt .hint-container {
  p:last-of-type {
    margin-bottom: 8px !important;
  }
}

// Hide null tags in post meta
.post-meta .tag-list .tag {
  &:empty {
    display: none;
  }

  &:has(+ .tag:empty) {
    margin-right: 0;
  }
}

// Add rotate transition to markdown demo toggle buttons
.plume-content .vp-md-demo {
  .vp-md-demo-toggle-button {
    transition: background-color var(--vp-ct), transform var(--vp-tt);
  }
}

// Add background transition to toggle buttons
.hint-container.details summary {
  &::before {
    background: transparent;
    background-color: var(--vp-c-gray-2);
  }

  &:hover::before {
    background-color: var(--vp-c-gray-1);
  }
}

// Allow line wrapping in feature card details
.home-feature .details {
  white-space: pre-wrap;
}

// Remove bottom margin of nested hint containers in markdown demos
.plume-content .vp-md-demo-display > .hint-container:last-of-type {
  margin-bottom: 0;
}

// Fix task list styles
.plume-content {
  .task-list-container,
  ul,
  ol {
    padding-left: 1.75rem;
  }

  .task-list-container .task-list-item {
    input {
      width: auto;
      height: auto;
      margin: 0 0.5em 0.25em -2em;
      padding: 0;

      vertical-align: middle;

      &::after {
        display: none;
      }
    }

    label {
      margin-left: 0;
    }
  }
}

// Fix code block overflow within markdown demos in 640px or narrower layouts
.vp-md-demo-display {
  div[class*="language-"] {
    margin: 0;
    border-radius: 6px;
  }
}

// Borderless image-only tabs
.vp-tab:has(p:only-of-type > img:only-child) {
  padding: 0;

  p {
    margin: 0;
  }

  img {
    margin-bottom: -10px;
  }
}

// Improve back to top button
.back-to-top-button {
  --r: 16px;
  --percent: 0;

  @media (min-width: 768px) {
    & {
      --r: 22px;
    }
  }

  svg {
    width: 100%;
    height: 100%;

    circle {
      r: var(--r);
      cx: 50%;
      cy: 50%;
      fill: none;
      opacity: calc(var(--percent) * 100);

      stroke: var(--vp-c-brand-2);
      stroke-width: 4px;

      transform: rotate(-90deg);
      transform-origin: 50% 50%;

      stroke-linecap: round;
      stroke-dasharray: calc(var(--r) * 2 * 3.14159 * var(--percent)) 10000%;
    }
  }

  .percent,
  .icon {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    color: var(--vp-c-text-3);
    transition: opacity 0.5s ease, color var(--t-color);

    &.show {
      opacity: 1;
    }
  }

  .percent {
    width: 100%;
    height: 100%;

    font-size: 10px;
    line-height: 36px;
    font-family: var(--vp-font-family-mono);
    text-align: center;

    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;

    @media (min-width: 768px) {
      & {
        font-size: 14px;
        line-height: 48px;
      }
    }
  }

  .icon {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);

    width: 18px;
    height: 18px;

    @media (min-width: 768px) {
      & {
        width: 24px;
        height: 24px;
      }
    }
  }
}
